<%- include('../partials/header') %>

<%
function formatDate(dateStr) {
    if (!dateStr) return '';
    const date=new Date(dateStr);
    if(isNaN(date)) return dateStr;
    const day=String(date.getDate()).padStart(2,'0');
    const month=String(date.getMonth()+1).padStart(2,'0');
    const year=date.getFullYear();
    return `${day}/${month}/${year}`;
}
function formatCurrency(value) {
    if(value==null) return '';
    return Number(value).
        toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
}
%>

<h1>Lista</h1>
<table class="table table-bordered">
    <tr>
        <th>RE</th>
        <th>nome</th>
        <th>data de admissão</th>
        <th>salário</th>
    </tr>
    <% funcionarios.forEach(funcionario => { %>
        <tr>
            <td><%= funcionario.re %></td>
            <td><%= funcionario.nome %></td>
            <td><%= formatDate(funcionario.dataAdmissao) %></td>
            <td><%= formatCurrency(funcionario.salario) %></td>
        </tr>
    <% }); %>    
</table>
<a href="/funcionarios">voltar</a>
<%- include('../partials/footer') %>